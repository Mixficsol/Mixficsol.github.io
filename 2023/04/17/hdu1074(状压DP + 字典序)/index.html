<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>hdu1074(状压DP+字典序) | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="日期 2022 &#x2F; 03 &#x2F; 04">
<meta property="og:type" content="article">
<meta property="og:title" content="hdu1074(状压DP+字典序)">
<meta property="og:url" content="http://example.com/2023/04/17/hdu1074(%E7%8A%B6%E5%8E%8BDP%20+%20%E5%AD%97%E5%85%B8%E5%BA%8F)/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="日期 2022 &#x2F; 03 &#x2F; 04">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2023-04-17T03:36:29.825Z">
<meta property="article:modified_time" content="2023-04-17T03:37:37.580Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="algorithm">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-hdu1074(状压DP + 字典序)" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/04/17/hdu1074(%E7%8A%B6%E5%8E%8BDP%20+%20%E5%AD%97%E5%85%B8%E5%BA%8F)/" class="article-date">
  <time class="dt-published" datetime="2023-04-17T03:36:29.825Z" itemprop="datePublished">2023-04-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      hdu1074(状压DP+字典序)
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>日期 2022 &#x2F; 03 &#x2F; 04</p>
<span id="more"></span>

<p>[参考链接]<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_37493070/article/details/77336109">https://blog.csdn.net/qq_37493070/article/details/77336109</a></p>
<h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><blockquote>
<p>Doing Homework</p>
<p>Ignatius has just come back school from the 30th ACM&#x2F;ICPC. Now he has a lot of homework to do. Every teacher gives him a deadline of handing in the homework. If Ignatius hands in the homework after the deadline, the teacher will reduce his score of the final test, 1 day for 1 point. And as you know, doing homework always takes a long time. So Ignatius wants you to help him to arrange the order of doing homework to minimize the reduced score.</p>
<p>Input<br>The input contains several test cases. The first line of the input is a single integer T which is the number of test cases. T test cases follow.<br>Each test case start with a positive integer N(1&lt;&#x3D;N&lt;&#x3D;15) which indicate the number of homework. Then N lines follow. Each line contains a string S(the subject’s name, each string will at most has 100 characters) and two integers D(the deadline of the subject), C(how many days will it take Ignatius to finish this subject’s homework).<br>Note: All the subject names are given in the alphabet increasing order. So you may process the problem much easier.</p>
<p>Output </p>
<p>For each test case, you should output the smallest total reduced score, then give out the order of the subjects, one subject in a line. If there are more than one orders, you should output the alphabet smallest one.</p>
<p>Sample Input</p>
<p>2</p>
<p>3 </p>
<p>Computer 3 3 </p>
<p>English 20 1 </p>
<p>Math 3 2 </p>
<p>3 </p>
<p>Computer 3 3 </p>
<p>English 6 3 </p>
<p>Math 6 3</p>
</blockquote>
<blockquote>
<p>Sample Output </p>
<p>2 </p>
<p>Computer </p>
<p>Math </p>
<p>English </p>
<p>3 </p>
<p>Computer </p>
<p>English </p>
<p>Math</p>
</blockquote>
<h2 id="解题思路"><a href="#解题思路" class="headerlink" title="解题思路"></a>解题思路</h2><blockquote>
<p>这个题目其实只是一个状压压缩dp的入门题，但是我刚开始写的时候却困难重重，首先是这个题的题解刚开始看不懂，然后前前后后花了一个多小时去理解，题目的意思是一个学生要写作业<br>每科作业有两个属性，一个是完成该作业需要的时间，一个是这个作业的截止时间，问在多科作业中怎么写才能使扣的分数最少(ex：如果一个作业需要两天写完，但是截止时间是1天，那么<br>写完就会扣一分，超出几天写完就是扣几分，所以我们需要合理规划写作业顺序）题目还说了各科作业以字典序增大的顺序给出，需要我们在扣分一样多的情况下输出最小字典序的写作业顺序<br>这里我们对于每一科作业写完还是没写完用二进制位表示，假如有三门作业，101表示第1,3门作业写完了，第二门没写完，110，表示第1,2门作业写完了，第三门作业没写完。那么从000到<br>111我们需要遍历这么多次，dp思想的思路是：若要求1011的最优解，那么就可能是从1001,1010,0011这三个状态递推过来的。</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> INF 0x7fffffff</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> rep(x, y, z) for (int x = y; x &lt;= z; x++)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> dec(x, y, z) for (int x = y; x &gt;= z; x--)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> format(a) memset (a, 0, sizeof(a))</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> swap(a, b) (a ^= b ^= a ^= b)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ll long long int</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ull unsigned long long int </span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> uint unsigned int</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> maxn = <span class="number">1e6</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">task</span> &#123;</span><br><span class="line">  string name; <span class="comment">// 课程名字</span></span><br><span class="line">  <span class="type">int</span> cost; <span class="comment">// 课程作业写完需要的时间</span></span><br><span class="line">  <span class="type">int</span> dead; <span class="comment">// 该课程还有几天需要交</span></span><br><span class="line">&#125; work[<span class="number">20</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">property</span> &#123;</span><br><span class="line">  <span class="type">int</span> father; <span class="comment">// 父节点</span></span><br><span class="line">  <span class="type">int</span> course; <span class="comment">//记录课程名字</span></span><br><span class="line">  <span class="type">int</span> score;  <span class="comment">// 记录已经扣掉的分数</span></span><br><span class="line">  <span class="type">int</span> time;   <span class="comment">// 做完作业需要的时间</span></span><br><span class="line">&#125; dp[<span class="number">1</span> &lt;&lt; <span class="number">15</span>]; <span class="comment">//该状态下完成的任务扣分的最优解</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span> </span>&#123;</span><br><span class="line">  ios_base::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">  cin.<span class="built_in">tie</span>(<span class="literal">nullptr</span>);</span><br><span class="line">  <span class="type">int</span> t, n;</span><br><span class="line">  cin &gt;&gt; t;</span><br><span class="line">  <span class="keyword">while</span> (t--) &#123;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    format(dp);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">      cin &gt;&gt; work[i].name &gt;&gt; work[i].dead &gt;&gt; work[i].cost; <span class="comment">//记录各个属性值</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> end = <span class="number">1</span> &lt;&lt; n;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; end; i++) &#123; <span class="comment">// 这里枚举所有的情况从什么都没做的00000到都做了的11111</span></span><br><span class="line">      dp[i].score = INF; <span class="comment">// 初始化dp为最大值因为题目要求最小值</span></span><br><span class="line">      <span class="keyword">for</span> (<span class="type">int</span> j = n - <span class="number">1</span>; j &gt;= <span class="number">0</span>; j--) &#123; <span class="comment">// 这里因为题目的输入是由字典序逐渐增大来给的，所以要以最小字典序输出得从最左边(最后一门课）开始遍历1000，这里的1就是最后一门课，0001这里</span></span><br><span class="line">        <span class="type">int</span> temp = <span class="number">1</span> &lt;&lt; j;             <span class="comment">// 的1就是第一节课</span></span><br><span class="line">	<span class="keyword">if</span> (temp &amp; i) &#123; <span class="comment">// 确认前面的状态是什么，假如这里的i的二进制表示是1011，那么做完括号中的运算后他的值可能是1010，1001, 0011，这三种情况</span></span><br><span class="line">	  <span class="type">int</span> rec = i - temp; <span class="comment">// 这里的减法就是把回到前一个状态，例如i是1011，temp是0010，那么减完就是1001，回到上面三种情况中的一种</span></span><br><span class="line">	  <span class="type">int</span> res = dp[rec].time + work[j].cost - work[j].dead; <span class="comment">// res代表要扣的分数=之前写完作业已经用掉的天数 + 当前这个作业需要用的天数 - 当前这个作业需要的截止时间</span></span><br><span class="line">	  <span class="keyword">if</span> (res &lt; <span class="number">0</span>) &#123;</span><br><span class="line">	    res = <span class="number">0</span>;  <span class="comment">// 这种出现在截止时间特别长时，例如之前写作业用掉一天，当前作业需要2天，这个作业需要的截止时间是第100天，那么此时我们认为是不扣分的因为做完这个作业才第三天</span></span><br><span class="line">	  &#125;</span><br><span class="line">	  <span class="keyword">if</span> (res + dp[rec].score &lt; dp[i].score) &#123; <span class="comment">// 如果出现了最优的扣分情况就赋值给当前状态下的dp</span></span><br><span class="line">	    dp[i].score = res + dp[rec].score; <span class="comment">// 最优扣分 = 之前的扣分 + 这次要扣的分数</span></span><br><span class="line">	    dp[i].father = rec; <span class="comment">// 当前作业的子节点就是之前作业的状态，例如当前最优状态是1011，是由1001这个状态得来的，那么1001就是1011的父节点</span></span><br><span class="line">	    dp[i].course = j;  <span class="comment">// 记录当前写的科目作业名字</span></span><br><span class="line">	    dp[i].time = dp[rec].time + work[j].cost; <span class="comment">// 计算写完这个作业已经用掉了多少天 = 之前作业需要的时间 + 当前作业需要的时间</span></span><br><span class="line">         &#125;</span><br><span class="line">       &#125;</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   cout &lt;&lt; dp[end - <span class="number">1</span>].score &lt;&lt; endl; <span class="comment">// 计算出总共扣的分数（end- 1)这个二进制就1111111，代表所有的作业都完成了</span></span><br><span class="line">   stack&lt;<span class="type">int</span>&gt; q; </span><br><span class="line">   <span class="type">int</span> x = end - <span class="number">1</span>;</span><br><span class="line">   <span class="keyword">while</span> (dp[x].time) &#123; <span class="comment">// 从最后完成的作业开始往前找父节点</span></span><br><span class="line">     q.<span class="built_in">push</span>(dp[x].course); <span class="comment">// 将最后完成的存入栈中，栈最上面的是最先完成的</span></span><br><span class="line">     x = dp[x].father;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">while</span> (!q.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">     <span class="type">int</span> y = q.<span class="built_in">top</span>();</span><br><span class="line">     cout &lt;&lt; work[y].name &lt;&lt; endl; <span class="comment">// 依次打印出栈</span></span><br><span class="line">     q.<span class="built_in">pop</span>();</span><br><span class="line">   &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/04/17/hdu1074(%E7%8A%B6%E5%8E%8BDP%20+%20%E5%AD%97%E5%85%B8%E5%BA%8F)/" data-id="clgkagq81000i69rf9sya21yh" data-title="hdu1074(状压DP+字典序)" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/algorithm/" rel="tag">algorithm</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2023/04/17/hdu1281/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          hdu1281
        
      </div>
    </a>
  
  
    <a href="/2023/04/17/hdu1195/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">hdu1195</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/README/" rel="tag">README</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/algorithm/" rel="tag">algorithm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blog/" rel="tag">blog</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/README/" style="font-size: 10px;">README</a> <a href="/tags/algorithm/" style="font-size: 20px;">algorithm</a> <a href="/tags/blog/" style="font-size: 15px;">blog</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/04/">April 2023</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/04/17/%E9%93%BE%E5%BC%8F%E5%89%8D%E5%90%91%E6%98%9F%E5%AD%98%E5%9B%BE/">链式前向星存图</a>
          </li>
        
          <li>
            <a href="/2023/04/17/poj2418(map%E8%BE%93%E5%87%BA%E5%AD%97%E7%AC%A6%E4%B8%B2)/">poj2418(map输出字符串)</a>
          </li>
        
          <li>
            <a href="/2023/04/17/poj3041%E5%8C%88%E7%89%99%E5%88%A9%E7%AE%97%E6%B3%95%E6%9C%80%E5%B0%8F%E8%B7%AF%E5%BE%84%E8%A6%86%E7%9B%96/">poj3041</a>
          </li>
        
          <li>
            <a href="/2023/04/17/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0/">数据库连接池</a>
          </li>
        
          <li>
            <a href="/2023/04/17/hdu4850(%E6%AC%A7%E6%8B%89%E5%9B%9E%E8%B7%AF+%E6%9E%84%E9%80%A0)/">hdu4850(欧拉回路)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2023 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>